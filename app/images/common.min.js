function delay(o){return new Promise(function(t,e){setTimeout(function(){t()},o)})}var floatingTocNew=$(".floating-toc-new"),bookToc=$(".book-toc"),contentMiddleYn=$("#content-middle-yn").val(),animating=!1,mobileAnimating=!1,timer=0,clickFloatingFlag=!0,title=null,floatingTocPostion=$("#floating-toc-position").val(),adsTocPosition=$("#ads-toc-position").val(),articleMaxWidth=Number($("#article-max-width").val()),clickContentFlag=!0,tocUnfoldYn=$("#toc-unfold-yn").val();function clickContentTitle(){var t;clickContentFlag&&(clickContentFlag=!1,t=(t=300*$("#toc").find("a").length/20)<300?300:500<t?500:t,$(".book-toc #toc").slideToggle(t,"linear",function(){var t=$(".book-toc>p>span#toggle");t.hasClass("open")?(t.html("&#xf103;"),t.removeClass("open")):(t.html("&#xf102;"),t.addClass("open")),clickContentFlag=!0}))}function makeToc(){var t,e;0<$(".content-article h2,h3,h4").length-$(".another_category h4").length-$("h3.tit_list_type").length&&(1==$(".book-toc").length?$("#auto-toc-yn").val()&&$(".book-toc").css("display","block"):1<$(".book-toc").length&&(($("#ignore-toc-yn").val()?$(".book-toc").eq(1):$(".book-toc").eq(0)).remove(),$(".book-toc").css("display","block")),0<(t=$("#toc")).length&&(e="&#xf102;",$("#fold-toc-yn").val()?(t.css("display","none"),e="&#xf103;"):t.css("display","block"),t.toc({content:".content-article",headings:"h2,h3,h4"}),$(".book-toc p").append('<span id="toggle" style="padding-left:10px;">'+e+"</span>"),0<$(".another_category").length&&t.find("li:last").remove(),$("#fold-toc-yn").val()||$(".book-toc>p>span#toggle").addClass("open"),makeClipboardLink(),bookToc=$(".book-toc")),$(".book-toc p").off("click touchend").on("click touchend",function(){clickContentTitle()}))}function checkContentPosition(){var t=$(".content-article").find("h2,h3,h4"),e=window.scrollY+50+($("#fixed-header").val()&&0<$("header").length?$("header").height()+5:0)+addHeightByAnchorAds("top");if(1<t.length)for(var o=0;o<t.length;o++){var n=$(".floating-toc-new #toc").find("a");if(o<t.length-1){if(t.eq(o).offset().top<e&&t.eq(o+1).offset().top>e){n.removeAttr("class"),n.parent().removeAttr("class"),n.eq(o).addClass("floating-toc-title-ani"),n.eq(o).addClass("selected");break}}else if(t.eq(o).offset().top<e){n.removeAttr("class"),n.parent().removeAttr("class"),n.eq(o).addClass("floating-toc-title-ani"),n.eq(o).addClass("selected");break}}}function clickFloatingTitle(){clickFloatingFlag&&(clickFloatingFlag=!1,floatingTocNew.css("height",""),$(".floating-toc-new #toc").css("display",""),contentMiddleYn&&250<(window.innerWidth-$(".content-wrapper").outerWidth())/2||!contentMiddleYn&&1413<window.innerWidth?(title.hasClass("close")&&(contentMiddleYn&&!adsTocPosition||fixedRecommendAds("unfold")),$("#toc-body").slideToggle(300,"linear",function(){title.hasClass("close")?(title.removeClass("close"),title.html("&#xf102;")):(title.addClass("close"),title.html("&#xf103;"),contentMiddleYn&&!adsTocPosition||fixedRecommendAds("toc")),clickFloatingFlag=!0})):(title.hasClass("close")&&(title.html("&#xf102;"),floatingTocNew.css("width","80%"),floatingTocNew.css("max-width","250px"),floatingTocNew.css("transform","scale(1.0)"),checkContentPosition(),1079<window.innerWidth&&window.innerWidth<1400&&floatingTocPostion&&!contentMiddleYn||window.innerWidth>articleMaxWidth+32&&floatingTocPostion&&contentMiddleYn?floatingTocNew.css("right","0px"):floatingTocNew.css("left","0px")),$("#toc-body").slideToggle(300,"linear",function(){title.hasClass("close")?title.removeClass("close"):(title.html("&#xf103;"),title.addClass("close"),floatingTocNew.css("width","fit-content"),floatingTocNew.css("transform","scale(0.8)"),1079<window.innerWidth&&window.innerWidth<1400&&floatingTocPostion&&!contentMiddleYn||window.innerWidth>articleMaxWidth+32&&floatingTocPostion&&contentMiddleYn?floatingTocNew.css("right","-8px"):floatingTocNew.css("left","-8px")),clickFloatingFlag=!0})))}function makeFloatingToc(){var t=$(".content-article h2,h3,h4").length-$(".another_category h4").length-$("h3.tit_list_type").length;0<bookToc.length&&0<t&&(t=$('<div id="toc-title"><p>목차<span id="toggle" class="close" style="padding-left:5px;">&#xf103;</span></p></div>'),floatingTocNew.append(t),t=$('<div id="toc-body"></div>').append(bookToc.find("#toc").clone()),floatingTocNew.append(t),floatingTocNew.css("height","19px"),title=$("#toc-title>p>span#toggle"),$("#toc-title").off("click").on("click",function(){clickFloatingTitle()}),$("#toc-title").off("touchend").on("touchend",function(){clickFloatingTitle()}),$("#toc-body").find("a").off("click").on("click",function(){checkPosition()}))}function initFloatingTocNew(){$("#toc-body").css("display","none"),$(".floating-toc-new #toc").css("display",""),floatingTocNew.css("display",""),floatingTocNew.css("width",""),floatingTocNew.css("max-width",""),floatingTocNew.css("max-height",""),floatingTocNew.css("top",""),floatingTocNew.css("margin-right",""),floatingTocNew.css("transform",""),floatingTocNew.css("left",""),floatingTocNew.css("right",""),title.addClass("close")}function appendTocNew(){var t;0<bookToc.length&&null!=title&&(t=$("#fixed-header").val()?$("header").height():0,contentMiddleYn&&250<(window.innerWidth-$(".content-wrapper").outerWidth())/2||!contentMiddleYn&&1413<window.innerWidth?window.scrollY>bookToc.outerHeight()+bookToc.offset().top-t-addHeightByAnchorAds("top")?animating||(mobileAnimating=!(animating=!0),initFloatingTocNew(),tocUnfoldYn&&contentMiddleYn?($("#toc-body").css("display",""),floatingTocNew.css("height",""),title.html("&#xf102;"),title.removeClass("close")):(title.html("&#xf103;"),title.addClass("close")),floatingTocNew.animate({opacity:"1.0"},300)):animating&&(mobileAnimating=!(animating=!1),floatingTocNew.animate({opacity:"0.0"},300)):window.scrollY>bookToc.outerHeight()+bookToc.offset().top-$("header").height()?mobileAnimating||(animating=!(mobileAnimating=!0),initFloatingTocNew(),title.html("&#xf103;"),$("#toc-body").css("display","none"),floatingTocNew.css("width","fit-content"),floatingTocNew.css("height","20px"),floatingTocNew.css("margin-right","0px"),floatingTocNew.css("margin-left","0px"),floatingTocNew.css("opacity","0.9"),floatingTocNew.css("transform","scale(0.8)"),1079<window.innerWidth&&window.innerWidth<1400&&floatingTocPostion&&!contentMiddleYn||window.innerWidth>articleMaxWidth+32&&floatingTocPostion&&contentMiddleYn?floatingTocNew.css("right","-8px"):floatingTocNew.css("left","-8px")):mobileAnimating&&(animating=!(mobileAnimating=!1),floatingTocNew.css("display","none"),title.html("&#xf102;"),title.removeClass("close"),$("#toc-body").css("display","")),t=addHeightByAnchorAds("top"),$("#fixed-header").val()?floatingTocNew.css("top",$("header").height()+10+t+"px"):$("#hide-sidebar").val()?floatingTocPostion?floatingTocNew.css("top",60+t+"px"):floatingTocNew.css("top",30+t+"px"):1079<window.innerWidth&&window.innerWidth<1400&&floatingTocPostion&&!contentMiddleYn||window.innerWidth>articleMaxWidth+32&&floatingTocPostion&&contentMiddleYn?floatingTocNew.css("top",10+t+"px"):floatingTocNew.css("top",30+t+"px"),floatingTocNew.height()>floatingTocNew.find("#toc-title").height()&&checkContentPosition())}var safeFlag=!0;function appendToc(){var i,t,l,e=$(".book-toc"),a=$(".floating-toc"),s=!0;function o(o){var n;s&&(s=!1,a.hasClass("noclick")?a.removeClass("noclick"):(0!==l&&(clearTimeout(l),l=0),a.css("transition",""),(n=$("#toc-title>p>span#toggle")).hasClass("open")&&($("#toc-title").css("padding","10px 0 0 0"),a.css("padding","0 10px 0"),a.css("border-radius","0"),a.css("opacity","0.9"),a.removeClass("floating-toc-header-ani")),setTimeout(function(){$("#toc-body").slideToggle(300,"linear",function(){var t,e;n.hasClass("close")?(a.css("transition",""),n.text("펼치기"),n.removeClass("close"),n.addClass("open"),a.css("padding","0"),$("#toc-title").css("padding","10px"),a.css("border-radius","10px"),a.css("opacity","0.7"),a.addClass("floating-toc-header-ani"),window.innerWidth<768&&(i.find("p").css("display","none"),i.find(".floating-icon").css("display","block"))):("init"===o&&(t=a.innerWidth(),e=$(window).innerWidth(),a.innerHeight()>$(window).innerHeight()||e<t?a.css("display","none"):(floatingTocPostion&&(a.css("left",""),a.css("right","0")),a.css("opacity","0.0"),setTimeout(function(){$(".content-wrapper").offset().left-20>t?(floatingTocPostion?(a.css("left",""),a.css("right",$(".content-wrapper").offset().left-t-20+"px")):a.css("left",$(".content-wrapper").offset().left-t-20+"px"),a.css("opacity","0.9"),a.css("transition","0.7s linear"),setTimeout(function(){a.css("transition","")},800)):"none"==$(".menu").css("display")?(a.css("right","20px"),a.css("left","")):(a.css("left","20px"),a.css("right",""))},500),smoothScroll())),n.text("접기"),n.removeClass("open"),n.addClass("close"),window.innerWidth<768&&(i.find("p").css("display","block"),i.find(".floating-icon").css("display","none")))})},200)),setTimeout(function(){s=!0},500))}function n(){var t=$(".content-article").find("h2,h3,h4"),e=window.scrollY+50+($("#fixed-header").val()&&0<$("header").length?$("header").height()+5:0);if(1<t.length)for(var o=0;o<t.length;o++){var n=$(".floating-toc #toc").find("a");if(o<t.length-1){if(t.eq(o).offset().top<e&&t.eq(o+1).offset().top>e){n.removeAttr("class"),n.parent().removeAttr("class"),n.eq(o).addClass("floating-toc-title-ani"),n.eq(o).addClass("selected");break}}else if(t.eq(o).offset().top<e){n.removeAttr("class"),n.parent().removeAttr("class"),n.eq(o).addClass("floating-toc-title-ani"),n.eq(o).addClass("selected");break}}}function r(){"-"==a.css("bottom").substr(0,1)&&(a.css("bottom","10px"),a.css("top","")),"-"==a.css("right").substr(0,1)&&(a.css("right","10px"),a.css("left","")),"-"==a.css("top").substr(0,1)&&a.css("top","10px"),"-"==a.css("left").substr(0,1)&&a.css("left","10px"),0<a.attr("style").indexOf("bottom:")&&0<a.attr("style").indexOf("top:")&&a.css("top",""),0<a.attr("style").indexOf("left:")&&0<a.attr("style").indexOf("right:")&&a.css("left","")}0<e.length&&window.scrollY>e.offset().top+e.innerHeight()?0===a.height()&&0===$("#toc-title").length&&safeFlag?(safeFlag=!1,a.css("display","block"),i=$('<div id="toc-title"><div class="floating-icon"></div><p>목차 <span id="toggle" class="open" style="color:#517135;">펼치기</span></p></div>'),(window.innerWidth<768?i.find("p"):i.find(".floating-icon")).css("display","none"),a.append(i),t=$('<div id="toc-body" style="display:none;"></div>').append(e.find("#toc").clone()),a.append(t),a.find("#toc").css("display",""),a.css("padding","0"),$("#toc-title").css("padding","10px"),l=0,$.getScript("https://code.jquery.com/ui/1.12.1/jquery-ui.min.js",function(){$.getScript("https://cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js",function(){a.draggable({handle:"#toc-title",start:function(t,e){a.css("right",""),a.css("bottom","");var o=this;l=setTimeout(function(){$(o).addClass("noclick")},250)},stop:function(t,e){r()}})})}),a.css("position","fixed"),a.css("top","15px"),$("#toc-title").off("click").on("click",function(){o()}),$("#toc-title").off("touchend").on("touchend",function(t){o()}),$("#toc-body").find("a").off("click").on("click",function(t){n()}),$("#toc-body").find("a").off("touchstart").on("touchstart",function(t){a.draggable("disable")}),$("#toc-body").find("a").off("touchend").on("touchend",function(t){setTimeout(function(){a.draggable("enable")},200),n()}),a.css("visibility","hidden"),o("init"),setTimeout(function(){$(".content-wrapper").offset().left<$(".floating-toc").width()+50&&(s=!0,o())},500),setTimeout(function(){a.css("visibility",""),safeFlag=!0},1100)):(n(),r()):(a.find(".selected").removeAttr("class"),e.append(a.find("#toc")),e.removeAttr("style"),a.find("div").remove(),a.removeAttr("style"),a.css("display","none"),$("#toc").find("a").removeClass("floating-toc-title-ani"))}function copyTitleToClipboard(t){var e=$("#toc a"),o=document.createElement("textarea");document.body.appendChild(o),o.value=e.eq(t).prop("href"),o.select(),document.execCommand("copy"),document.body.removeChild(o),showToast("링크 복사 완료!")}function makeClipboardLink(){for(var t=$("#toc a"),e=0;e<t.length;e++){var o=t.eq(e).attr("href").substr(1).replace(/[\{\}\[\]\/?.,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"]/gi,"\\$&");$("#"+o).append('<button class="copy-title-btn" onclick="copyTitleToClipboard('+e+')"></button>')}}var repeatCnt=0,smoothScrollTimer=0,currentPosition=null;function smoothScroll(){$("a:not(.lb-prev, .lb-next, .lb-close, .btn-toggle-moreless, .btn_mark)").off().on("click",function(){var t=this,e=$.attr(t,"href"),o=$(window).scrollTop(),n=0,i=!1,l=$("#fixed-header").val()&&0<$("header").length?$("header").height()+5:0;if(void 0!==e&&1<e.length&&-1<e.indexOf("#")&&(n=$("#"+e.substr(1).replace(/[\{\}\[\]\/?.,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"]/gi,"\\$&")).offset().top-addHeightByAnchorAds("top"),i=!0),$(t).hasClass("move-top-btn")&&(i=!0),currentPosition!=n-l&&(clearTimeout(smoothScrollTimer),smoothScrollTimer=0),i){o=Math.abs(o-n-l)/2e3*300,o=o<300?300:1500<o?1500:o;return $("html, body").animate({scrollTop:n-l},o,"swing"),smoothScrollTimer=setTimeout(function(){currentPosition=repeatCnt<3&&0!=n?($(t).click(),repeatCnt++,n):(smoothScrollTimer=repeatCnt=0,null)},o),!1}})}var msgTimer=0;function showToast(t,e){clearToast();var o=$("#toast");"top"==e?(o.css("top","calc(33px + "+addHeightByAnchorAds("top")+"px)"),o.css("bottom","")):"bottom"==e?(o.css("top",""),o.css("bottom","calc(-13px + "+addHeightByAnchorAds("bottom")+"px)")):(o.css("top","calc(50% - "+(addHeightByAnchorAds("bottom")+addHeightByAnchorAds("top"))/2+"px)"),o.css("bottom","")),o.children().html(t),setTimeout(function(){o.fadeIn(500,function(){msgTimer=setTimeout(function(){o.fadeOut(500)},1e3)})},200)}function clearToast(){0!=msgTimer&&(clearTimeout(msgTimer),msgTimer=0)}var scrollTop=0,likeButton=null,likeButtonPosition=0,scrollHeight=0,contentsCurrentPosition=0,etcCurrentPosition=0,$pbv=$(".progress-bar-vertical"),$pbh=$(".progress-bar-horizontal"),$pbev=$(".progress-bar-etc-vertical"),$pbeh=$(".progress-bar-etc-horizontal");function commonProgressBar(){likeButton=$(".container_postbtn"),likeButtonPosition=0<likeButton.length?likeButton.offset().top:0,scrollHeight=$("body").prop("scrollHeight"),scrollTop=$(window).scrollTop(),contentsCurrentPosition=0==likeButtonPosition?0:likeButtonPosition>$(window).innerHeight()?scrollTop/(likeButtonPosition-$(window).innerHeight()):1,etcCurrentPosition=1-(scrollHeight-scrollTop-$(window).innerHeight())/(scrollHeight-likeButtonPosition)}function progressBarVertical(){$pbv.css("height",100*(1<contentsCurrentPosition?1:contentsCurrentPosition)+"%"),$pbv.css("left",$(".content-wrapper").offset().left+"px"),$pbv.css("opacity",.8-.5*(1<contentsCurrentPosition?1:contentsCurrentPosition))}function progressBarHorizontal(){$pbh.css("width",100*(1<contentsCurrentPosition?1:contentsCurrentPosition)+"%"),$pbh.css("opacity",.8-.5*(1<contentsCurrentPosition?1:contentsCurrentPosition))}function progressBarEtcVertical(){$pbev.css("height",(0<likeButtonPosition?100*etcCurrentPosition:0)+"%"),$pbev.css("left",$(".content-wrapper").outerWidth()+$(".content-wrapper").offset().left+"px"),$pbev.css("opacity",.8-.5*etcCurrentPosition)}function progressBarEtcHorizontal(){$pbeh.css("width",(0<likeButtonPosition?100*etcCurrentPosition:0)+"%"),$pbeh.css("opacity",.8-.5*etcCurrentPosition)}function scrollProgressBar(){commonProgressBar(),$("#progress-top").val()&&progressBarHorizontal(),$("#progress-left").val()&&progressBarVertical(),$("#progress-right").val()&&progressBarEtcVertical(),$("#progress-bottom").val()&&progressBarEtcHorizontal()}function foldReply(t){if(document.location.href.indexOf("#comment")<0){for(var e=$(t),o=$("div.comment-list>ul>li#"+e.attr("id")+">ul>li"),n=0;n<o.length-Number($("#fold-comment-num").val());n++)o.eq(n).css("display","none");t=e.find("p").eq(0);0<t.find("div").length&&e.find("p").eq(0).find("div").remove();e='<div onclick="unfoldReply(this)" class="more-reply">'+(o.length-Number($("#fold-comment-num").val()))+"개 이전 댓글 보기</div>";t.append(e)}}function unfoldReply(t){for(var t=$(t).parent().parent(),e=$("div.comment-list>ul>li#"+t.attr("id")+">ul>li"),o=0;o<e.length-Number($("#fold-comment-num").val());o++)e.eq(o).css("display","block");t.find("p").eq(0).find("div").remove()}function initFoldReply(){if($("#fold-comment-yn").val()){var t=$("article").find(".inner").find(".comment-list>ul>li");if(0<t.length)for(var e=0;e<t.length;e++)t.eq(e).find("ul>li").length>Number($("#fold-comment-num").val())&&foldReply(t[e])}}function commentAutoLink(){!function(){var s=[].slice,t=function(){var n,e,i,o,l,t=1<=arguments.length?s.call(arguments,0):[],a=/(^|[\s\n]|<[A-Za-z]*\/?>)((?:https?|ftp):\/\/[\-A-Z0-9+\u0026\u2019@#\/%?=()~_|!:,.;]*[\-A-Z0-9+\u0026@#\/%=~()_|])/gi;return 0<t.length?(o=t[0],n=o.callback,i=function(){var t=[];for(e in o)l=o[e],"callback"!==e&&t.push(" "+e+"='"+l+"'");return t}().join(""),this.replace(a,function(t,e,o){return""+e+(("function"==typeof n?n(o):void 0)||"<a class='auto-link' href='"+o+"'"+i+">"+o+"</a>")})):this.replace(a,"$1<a class='auto-link' href='$2'>$2</a>")};String.prototype.autoLink=t}.call(this);for(var t=$("div.comment-list>ul>li>p"),e=$("div.comment-list>ul>li>ul>li>p"),o=0;o<t.length;o++)t[o].innerHTML=t[o].innerHTML.autoLink({target:"_blank"});for(var n=0;n<e.length;n++)e[n].innerHTML=e[n].innerHTML.autoLink({target:"_blank"})}var fontSize=1;function changeFontSize(t){if(""===t)return $("article").removeAttr("style"),!(fontSize=1);"+"===t?fontSize<5?fontSize+=.05:fontSize=5:"-"===t&&(.6<fontSize?fontSize-=.05:fontSize=.6),$("article").attr("style","font-size: "+fontSize+"em !important"),$(".change-font-btn").blur()}function commentControl(){$(document).on("click",".comments .comment-list ul li .author-meta .control button",function(){$(this).siblings(".link").is(":hidden")?($(".comments .link").removeAttr("style"),$(this).siblings(".link").show()):$(this).siblings(".link").hide()}),$(document).on("keyup",function(t){"27"==t.keyCode&&$(".comment-list ul li .author-meta .control .link").removeAttr("style")})}function removeDimmed(){$("#dimmed").remove(),$("section").css("z-index","110")}function doGTranslateCustom(t){("ko|ko"!=t||null!=localStorage.getItem("translate")&&"n"!=localStorage.getItem("translate"))&&("ko|ko"==t&&"y"==localStorage.getItem("translate")?localStorage.setItem("translate","n"):localStorage.setItem("translate","y"),doGTranslate(t),setTimeout(function(){window.innerWidth<1080&&($("button.close").focus(),$("button.close").click())},500))}function makeBell(){var t;$("#make-bell-yn").val()&&location.href.indexOf("notice")<0&&(t=$("#make-bell").val().replaceAll("&lt;","<").replaceAll("&gt;",">"),$('<div class="like_bubble"><span class="bubble_image"></span><div class="inner">'+t+"</div></div>").insertBefore($(".container_postbtn").children().eq(0)))}function toastAfterLike(){$("#toast-after-like-yn").val()&&$("button.btn_post.uoc-icon").on("click",function(){setTimeout(function(){0<$("button.btn_post.uoc-icon>div.like_on").length&&showToast($("#toast-after-like").val())},500)})}function common(){var e=$(".top-button .profile"),t=$(".top-button .menu");e.on("click","button",function(){$(this).siblings("nav").is(":hidden")?$(this).siblings("nav").show():$(this).siblings("nav").hide()}),e.on("mouseleave",function(){$(this).find("nav").hide()}),window.T&&window.T.config.USER.name?(e.find(".login").hide(),e.find(".logout").show()):(e.find(".login").show(),e.find(".logout").hide()),e.on("click",".login",function(){document.location.href="https://www.tistory.com/auth/login?redirectUrl="+encodeURIComponent(window.TistoryBlog.url)}),e.on("click",".logout",function(){document.location.href="https://www.tistory.com/auth/logout?redirectUrl="+encodeURIComponent(window.TistoryBlog.url)});var o=!0;$(".comment-content, span.count > span").bind("DOMSubtreeModified",function(){o&&(o=!1,setTimeout(function(){commentAutoLink(),initFoldReply(),o=!0},500))}),t.on("click",function(){var t;$("body").hasClass("mobile-menu")?($("body").removeClass("mobile-menu"),"y"==localStorage.getItem("dark-mode")&&$(".sidebar, .sidebar h2").css("background","#000"),$("#dimmed").length&&removeDimmed()):($("body").addClass("mobile-menu"),"y"==localStorage.getItem("dark-mode")&&$(".sidebar, .sidebar h2").css("background",""),$("body").append('<div id="dimmed"/>'),$("section").css("z-index",""),$(".sidebar .profile").length||($(".sidebar").append('<div class="profile" /><button type="button" class="close">닫기</button>'),e.find("ul").clone().appendTo(".sidebar .profile"),(t=$(".sidebar .profile")).on("click",".login",function(){document.location.href="https://www.tistory.com/auth/login?redirectUrl="+encodeURIComponent(window.TistoryBlog.url)}),t.on("click",".logout",function(){document.location.href="https://www.tistory.com/auth/logout?redirectUrl="+encodeURIComponent(window.TistoryBlog.url)})),$(".sidebar").css("padding-top",addHeightByAnchorAds("top")+50+"px"),$(".sidebar .close").css("top",addHeightByAnchorAds("top")+10+"px"),fixedRecommendAds("init"))}),$(".postbtn_like .wrap_btn.wrap_btn_etc button").on("click",function(){setTimeout(function(){},200)}),$(document).on("click","#dimmed, .sidebar .close",function(){$("body").removeClass("mobile-menu"),"y"==localStorage.getItem("dark-mode")&&$(".sidebar, .sidebar h2").css("background","#000"),$("#dimmed").length&&removeDimmed()});var n=localStorage.getItem("dark-mode"),t=$("#default-dark-mode").val();null==n?t?setDarkMode("+"):setDarkMode("-"):"y"==n?setDarkMode("+"):setDarkMode("-"),$(".share-btn").on("click",function(){var t=$("#tistorySnsLayer");0<t.length&&("block"==t.css("display")?(t.css("display","none"),t.removeClass("custom")):setTimeout(function(){$("button.btn_share").click(),t.css("position","fixed"),t.css("left",""),t.css("top",""),t.css("right","10px"),t.css("bottom",0<addHeightByAnchorAds("bottom")?addHeightByAnchorAds("bottom")+55:"75px")},200))});for(var i=$(".archives ul li a"),n=new Date(Date.now()),l=n.getFullYear(),a=n.getMonth()+1,s=0;s<i.length;s++){var r=i.eq(s).text().split("/"),c=12*(l-Number(r[0]))+(a-Number(r[1])),r="",r=0==c?"이번 달 작성 글 모아보기":c+"개월 전 작성 글 모아보기";i.eq(s).text("["+i.eq(s).text()+"] "+r)}if($(".category h2 a").html('카테고리 <span class="c_cnt">'+$(".category .link_tit .c_cnt").text()+"</span>"),$("#forced-dark-mode").val()&&(localStorage.setItem("dark-mode","y"),$("body").addClass("dark-mode")),0<$(".og-desc").length)for(s=0;s<$(".og-desc").length;s++)$(".og-desc").eq(s).text($(".og-desc").eq(s).text()+"...")}function updateTagsAttr(){var a,s,r,c,d=$(".content-title .inner h1, .content-article h2, h3, h4"),g=d.length-1,t=$(".content-article").find("img"),m=0,h=0,f=d.eq(0).text();t.each(function(t,e){var o=$(e);if(!o.attr("alt")||!o.attr("title"))for(var n,i,l=!1;!l;)if(m<=g&&(l=m===g||d.eq(m).offset().top<o.offset().top&&d.eq(m+1).offset().top>o.offset().top?("H1"===d.eq(m).prop("tagName")?a=f:"H2"===d.eq(m).prop("tagName")?a=f+" - "+s:"H3"===d.eq(m).prop("tagName")?a=f+" - "+s+" - "+r:"H4"===d.eq(m).prop("tagName")&&(a=f+" - "+s+" - "+r+" - "+c),o.attr("alt")||o.attr("alt",a),o.attr("title")||o.attr("title",a),!0):(m++,-1<(i=(n=d.eq(m).text()).indexOf(d.eq(m).find("button").text()))&&(n=n.substr(0,i)),"H2"===d.eq(m).prop("tagName")?s=n:"H3"===d.eq(m).prop("tagName")?r=n:"H4"===d.eq(m).prop("tagName")&&(c=n),!1)),200<++h)break}),$("img").each(function(t,e){e=$(e);e.attr("alt")||e.attr("alt",$("#header .inner > h1 > a").text().trim())}),$("script").removeAttr("type"),$("style").removeAttr("type")}function lazyLoading(){if($("#lazy-loading").val()){const t=document.querySelectorAll("img");0<t.length&&t.forEach(function(t){var e,o,n=$(t);n.offset().top>window.getWindowCleintHeight()&&(e=n.innerWidth(),o=n.innerHeight(),1<e&&1<o&&(n.css("width",e+"px"),n.css("height",o+"px")),n.css("opacity","0.2"),null!=t.getAttribute("srcset")&&(t.setAttribute("data-srcset",t.getAttribute("srcset")),t.setAttribute("srcset",$("#blank-img").attr("src"))),null!=t.getAttribute("src")&&(t.setAttribute("data-src",t.getAttribute("src")),t.setAttribute("src",$("#blank-img").attr("src"))),t.classList.add("lazyload"))}),[...document.querySelectorAll("img.lazyload")].forEach(async t=>{await function(t){const n={rootMargin:"0px",threshold:.1,...{}};return new Promise(e=>{const o=new IntersectionObserver(async t=>{var[t]=t;t.isIntersecting&&(e(),o.disconnect())},n);o.observe(t)})}(t),null!=t.getAttribute("src")&&t.setAttribute("src",t.getAttribute("data-src")),null!=t.getAttribute("srcset")&&t.setAttribute("srcset",t.getAttribute("data-srcset")),$(t).animate({opacity:"1.0"})})}}function fixedRecommendAds(t){var e,o,n,i,l,a,s;$("#use-fixed-ads-yn").val()&&(e=null,a=!1,"matched"==$("#fixed-ads-type").val()?(e=$("#recommend-ads").parent(),a=!0):"adsense"==$("#fixed-ads-type").val()?e=$("aside .revenue_unit_wrap .adsense").parent():"adfit"==$("#fixed-ads-type").val()&&(e=$("aside .revenue_unit_wrap .adfit").parent()),o=!1,n=$("#fixed-header").val()?$("header").height()+5:!$("#hide-sidebar").val()||floatingTocPostion?5:60,"toc"==t?null!=e&&(l=((window.innerWidth-($(".content-wrapper").width()+20))/2-e.parent().outerWidth())/2,(contentMiddleYn&&0<=l||!contentMiddleYn&&1400<=window.innerWidth)&&window.scrollY>$("header").height()&&(0<bookToc.length&&$("#toc-title>p>span#toggle").hasClass("close")&&(!contentMiddleYn||adsTocPosition)||contentMiddleYn&&!adsTocPosition||0==bookToc.length)?(i=!(0<bookToc.length)||contentMiddleYn&&!adsTocPosition?0:50,s=0,s=contentMiddleYn?$(".floating-toc-new")[0].offsetLeft+l-10:$(".floating-toc-new")[0].offsetLeft+5,a?(l=.9,a=addHeightByAnchorAds("top")+addHeightByAnchorAds("bottom"),a=window.innerHeight-a,e.height()>a-i-n&&(l=(a-i-n)/e.height()*.9),e.css("position","fixed"),a=$("#recommend-ads").height()*(1-l)/2,e.css("top","calc("+(i+n+addHeightByAnchorAds("top"))+"px - "+a+"px)"),e.css("transform","scale("+l+")")):(e.css("position","fixed"),e.css("top",i+n+addHeightByAnchorAds("top")-15+"px"),e.css("height","600px")),adsTocPosition||!contentMiddleYn?e.css("left",s+"px"):e.css("right",s+"px")):o=!0):"unfold"==t?null!=e&&(o=!0):"init"==t&&0<e.length&&e.removeAttr("style"),o&&e.removeAttr("style"))}var moveToTheTitleTimer=0;function moveToTheTitle(){var t;-1<location.href.indexOf("#")&&(t=decodeURIComponent(location.href.substr(location.href.indexOf("#")+1)).replace(/[\{\}\[\]\/?.,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"]/gi,"\\$&"),0<(t=$(0<t.length?"#"+t:"")).length&&-1<["H2","H3","H4","LI"].indexOf(t.prop("tagName"))&&(scrollTo(0,t.offset().top-($("#fixed-header").val()&&0<$("header").length?$("header").height()+5:0)),moveToTheTitleTimer=setTimeout(function(){repeatCnt<3?(moveToTheTitle(),repeatCnt++):repeatCnt=moveToTheTitleTimer=0},200)))}var bgmSource=[],saveIndex=window.localStorage.getItem("current-bgm-index"),currentIndex=(saveIndex=isNaN(Number(saveIndex))?"0":saveIndex)?Number(saveIndex):Math.floor(Math.random()*bgmSource.length),currentVolume=Number(window.localStorage.getItem("current-bgm-volume"))||.1,bgmPlaying=!1,nextPlay=!1,myBgm=null,currentBgm=null;function bgmMute(t){0<bgmSource.length&&("+"==t?myBgm.muted=!1:"-"==t?myBgm.muted=!0:browserCheck("ios")?showToast("아이폰은 지원하지 않습니다."):myBgm.muted=!myBgm.muted,myBgm.muted?$("#bgm-mute").html("&#xf028;"):$("#bgm-mute").html("&#xf6a9;")),$(".bgm-btn").blur()}function getCurrentBgm(){var t;0<bgmSource.length&&($("#bgm-autoplay-yn").val()&&(767<window.innerWidth||$("#bgm-autoplay-mobile-yn").val())&&(window.localStorage.getItem("current-bgm")||(window.localStorage.setItem("current-bgm","play"),currentVolume=.1)),"stop"==window.localStorage.getItem("current-bgm")||null==window.localStorage.getItem("current-bgm")?(myBgm.pause(),bgmPlaying=!1,$("#bgm-status").html("&#xf04b;")):(myBgm.paused&&!bgmPlaying&&(currentBgm.html(bgmSource.length>currentIndex?bgmSource[currentIndex].title:"재생 목록 없음"),myBgm.src=bgmSource[currentIndex].src,bgmMute("-"),void 0!==(t=myBgm.play())&&t.then(function(){bgmPlaying=!0;var t=(Number(window.localStorage.getItem("current-bgm-time"))||0)-.3;myBgm.currentTime=0<t?t:0,$("#bgm-status").html("&#xf04c;")}).catch(function(t){bgmPlaying=!1,$("#bgm-status").html("&#xf04b;")})),browserCheck("ios")&&bgmVolume("+")))}function nextBgm(t){myBgm.pause(),nextPlay=!(bgmPlaying=!1),currentIndex=((currentIndex+="+"==t?1:-1)<0?bgmSource.length-1:currentIndex)%bgmSource.length,window.localStorage.setItem("current-bgm-index",null),window.localStorage.setItem("current-bgm-time",null),window.localStorage.setItem("current-bgm","play"),getCurrentBgm(),$(".bgm-btn").blur()}function bgmVolume(t){0<bgmSource.length&&("+"==t?currentVolume+=.05:currentVolume-=.05,browserCheck("ios")?"+"==t?(window.localStorage.setItem("current-bgm","play"),bgmMute("+"),myBgm.play()):(window.localStorage.setItem("current-bgm","stop"),bgmMute("-"),myBgm.pause()):(myBgm.volume=currentVolume=1<currentVolume?1:currentVolume<0?0:currentVolume,showToast("볼륨: "+(Math.ceil(100*currentVolume)-Math.ceil(100*currentVolume)%5)+"%","bottom"))),$(".bgm-btn").blur()}function toggleBgm(){"stop"==window.localStorage.getItem("current-bgm")||null==window.localStorage.getItem("current-bgm")||""==$("#bgm-status").html()?window.localStorage.setItem("current-bgm","play"):(saveBgmStatus(),window.localStorage.setItem("current-bgm","stop")),getCurrentBgm(),$(".bgm-btn").blur()}function saveBgmStatus(){0<bgmSource.length&&(Date.now()-Number(window.localStorage.getItem("visit-time"))<36e5||null==window.localStorage.getItem("visit-time")?(window.localStorage.setItem("current-bgm-index",currentIndex),window.localStorage.setItem("current-bgm-time",myBgm.currentTime)):(window.localStorage.setItem("current-bgm-index",Math.floor(Math.random()*bgmSource.length)),window.localStorage.setItem("current-bgm-time","0")),window.localStorage.setItem("visit-time",Date.now()),window.localStorage.setItem("current-bgm-volume",currentVolume))}function bgmStartHandler(t){(bgmPlaying?saveBgmStatus:getCurrentBgm)()}function bgmEvents(){if(0<$("#bgm-title").length){$("#bgm").on("ended",function(t){nextBgm("+")}),$(window).on("beforeunload",function(t){saveBgmStatus()}),$(window).on("click",bgmStartHandler),$(window).on("touchstart",bgmStartHandler),$(window).on("touchend",bgmStartHandler);for(var t,e=1;e<11;e++)0<$("#bgm-src-"+e).length&&0<$("#bgm-src-"+e).val().length&&(t={src:$("#bgm-src-"+e).val().replaceAll("&amp;","&"),title:$("#bgm-title-"+e).val()},bgmSource.push(t));currentIndex>bgmSource.length-1&&(currentIndex=0),myBgm=$("#bgm")[0],currentBgm=$("#current-bgm"),myBgm.onplaying=function(){bgmPlaying=!0,myBgm.volume=currentVolume=1<currentVolume||currentVolume<0?.1:currentVolume,bgmMute("+"),currentBgm.hasClass("bgm-playing")||currentBgm.addClass("bgm-playing"),$("#bgm-status").html("&#xf04c;")},myBgm.onpause=function(){bgmPlaying=!1,currentBgm.hasClass("bgm-playing")&&currentBgm.removeClass("bgm-playing"),$("#bgm-status").html("&#xf04b;")},myBgm.muted?bgmMute("-"):bgmMute("+"),getCurrentBgm()}else window.localStorage.removeItem("current-bgm-index"),window.localStorage.removeItem("current-bgm-volume"),window.localStorage.removeItem("current-bgm-time"),window.localStorage.removeItem("visit-time")}function stopScrollTimer(){0!=moveToTheTitleTimer&&(clearTimeout(moveToTheTitleTimer),moveToTheTitleTimer=0),0!=smoothScrollTimer&&(clearTimeout(smoothScrollTimer),smoothScrollTimer=0)}var $headerTitle=$("header .inner p a"),$headerTitleImage=$("header .inner p a img"),headerTitleText=$("header .inner p a").text().trim(),$header=$("header"),initHeaderHeight=$("header").outerHeight(),$topButton=$(".top-button"),$contentTitle=$("article .inner .content-title"),flagForMoveToTheTitle=!0,fixedHeaderTimer=0;function fixedHeader(){var t,e;$("#fixed-header").val()&&(t=Number($("body").css("padding-top").replace("px","")),e=window.scrollY>t?addHeightByAnchorAds("top"):t,0<window.scrollY&&window.scrollHeight>window.innerHeight?($(".content-wrapper").css("margin-top",initHeaderHeight+"px"),$header.css("position","fixed"),$header.css("top",e+"px"),$header.css("left","0"),$header.css("z-index","119"),$topButton.css("position","fixed"),$topButton.css("top",e+10+"px"),$("#blog-menu").css("display","none"),$header.css("height",$headerTitle.height()+20+"px"),"y"!=localStorage.getItem("dark-mode")?$header.css("background","#fff"):$header.css("background",""),$header.css("opacity","0.9"),0<$contentTitle.length&&window.scrollY>$contentTitle.offset().top+$contentTitle.outerHeight()?($headerTitle.html($(".content-title .inner .title-box h1").text()),$headerTitle.attr("href","#")):(0<$headerTitleImage.length?($headerTitle.html(""),$headerTitle.append($headerTitleImage)):$headerTitle.html(headerTitleText),$headerTitle.attr("href","/")),$(".progress-bar-horizontal").css("top",$headerTitle.height()+20+e+"px"),$("#aside-top-blank").css("height",$headerTitle.height()+30+"px"),$("#aside-top-blank").slideDown(300,"linear")):0==window.scrollY&&(0!=fixedHeaderTimer&&(clearTimeout(fixedHeaderTimer),fixedHeaderTimer=0),$("#aside-top-blank").slideUp(300,"linear"),$("#blog-menu").fadeIn(500,"linear"),fixedHeaderTimer=0,fixedHeaderTimer=setTimeout(function(){$(".content-wrapper").css("margin-top",""),$header.css("height",""),$header.css("background",""),$header.css("border-bottom",""),$header.css("opacity",""),$header.css("position",""),$header.css("top",""),$header.css("left",""),$header.css("z-index",""),$topButton.css("top",e+10+"px"),0<$headerTitleImage.length?($headerTitle.html(""),$headerTitle.append($headerTitleImage)):$headerTitle.html(headerTitleText)},200)),0<$(".floating-toc").height()&&$(".floating-toc").css("top",$headerTitle.height()+20+"px"),-1<location.href.indexOf("#")&&flagForMoveToTheTitle&&(flagForMoveToTheTitle=!1,moveToTheTitle()))}function selectMakeFloatingToc(){"new"==$("#floating-toc-type").val()&&makeFloatingToc()}function selectAppendToc(){$("#use-floating-toc-yn").val()&&("new"==$("#floating-toc-type").val()?appendTocNew:appendToc)()}function detectTop(){0==window.scrollY&&"#"==$headerTitle.attr("href")&&$headerTitle.attr("href","/")}function foldFloatingToc(){contentMiddleYn&&250<(window.innerWidth-$(".content-wrapper").outerWidth())/2||!contentMiddleYn&&1413<window.innerWidth||null!=title&&0<title.length&&!title.hasClass("close")&&clickFloatingTitle()}var previousScrollTop=0,sidebarScrollFlag=!0;function stickySidebar(){var t="";window.scrollHeight>window.innerHeight+100&&$(".sidebar div")[0].scrollHeight>window.innerHeight?(t=$(".sidebar")[0].scrollHeight-$(".sidebar")[0].scrollTop>$("#lower").offset().top+$("#lower").height()+30-window.scrollY-75?"":"100vh",sidebarScrollFlag&&(sidebarScrollFlag=!1,$(".sidebar").css("height",t),setTimeout(function(){sidebarScrollFlag=!0},50)),$(".sidebar")[0].scrollTop>window.scrollY&&previousScrollTop>window.scrollY&&$(".sidebar")[0].scrollTo(0,window.scrollY),previousScrollTop=window.scrollY):sidebarScrollFlag&&(sidebarScrollFlag=!1,$(".sidebar").css("height",""),setTimeout(function(){sidebarScrollFlag=!0},50))}function toggleCategory(){if($("#fold-category").val()){var t=Number($(".sidebar").css("right").replace("px",""));if(Number.isNaN(t)||0<t)for(var e=$(".category_list > li"),o=0;o<e.length;o++){var n=e.eq(o).find("ul.sub_category_list"),i=[],l=trim($("#fold-category-target").val());l.split(",").forEach(function(t){t&&i.push(trim(t))}),0<n.length&&(-1<i.indexOf(String(o+1))||""==l)&&controlFoldCategory(o)}}}var foldFlag=!0,tempIndex=-1;function controlFoldCategory(t){var e=$(".category_list > li"),o=$(".category_list > li > a"),n=Number.isNaN(Number($("#fold-category-speed").val()))?600:Number($("#fold-category-speed").val());o.eq(t).addClass("fold"),e.eq(t).find("ul.sub_category_list").slideUp(n,"swing"),e.eq(t).hover(function(){unfoldCategory(e,o,t,n)},function(){foldCategory(e,o,t,n).then(function(){-1!=tempIndex&&t!=tempIndex?unfoldCategory(e,o,tempIndex,n):foldCategory(e,o,t,n)}),tempIndex=-1})}function unfoldCategory(t,e,o,n){tempIndex=o;t=t.eq(o).find("ul.sub_category_list");"none"==t.css("display")&&foldFlag&&(foldFlag=!1,t.slideDown(n,"swing",function(){e.eq(o).removeClass("fold")}))}function foldCategory(o,n,i,l){return new Promise(function(t){var e=o.eq(i).find("ul.sub_category_list");"none"!=e.css("display")&&e.slideUp(l,"swing",function(){n.eq(i).addClass("fold"),foldFlag=!0,t()})})}function replaceLink(){for(var t=$(".inner a"),e=0;e<t.length;e++)t.eq(e).attr("href")&&t.eq(e).attr("href",t.eq(e).attr("href").split("?category=")[0])}var prePostFlag=!0,nextPostFlag=!0;function makeRecommendBlock(t,e){prePostFlag&&"pre"==t?(prePostFlag=!1,$("#pre-content").append($(".another_category tr").eq(e+1).find("a").clone()),$("#next-content").append('<a href="#" class="no-post">다음 글 없음</a>'),$(".content-box .content-arrow").eq(1).addClass("no-post")):nextPostFlag&&"next"==t?(nextPostFlag=!1,$("#next-content").append($(".another_category tr").eq(e-1).find("a").clone()),$("#pre-content").append('<a href="#" class="no-post">이전 글 없음</a>'),$(".content-box .content-arrow").eq(0).addClass("no-post")):prePostFlag&&nextPostFlag&&"both"==t&&(nextPostFlag=prePostFlag=!1,$("#pre-content").append($(".another_category tr").eq(e+1).find("a").clone()),$("#next-content").append($(".another_category tr").eq(e-1).find("a").clone()))}var recommendPostFlag=!0,recommendPostTimer=0,preRecommendPosition=-1;function recommendPost(){if(0<$(".another_category").length){if(1<window.scrollY/($(".another_category").offset().top-window.innerHeight)&&window.scrollY-$(".another_category").offset().top<0&&preRecommendPosition<window.scrollY){if(recommendPostFlag){recommendPostFlag=!1;var t,e=$(".another_category tr"),o=-1;if(1<e.length){for(var n=0;n<e.length;n++)if(0<e.eq(n).find("a.current").length){o=n;break}0<o&&o<e.length-1?makeRecommendBlock("both",o):0==o?makeRecommendBlock("pre",o):1<e.length&&makeRecommendBlock("next",o)}prePostFlag&&nextPostFlag||0!=recommendPostTimer||(t=0,t=310<window.innerWidth?10:(window.innerWidth-310)/2,$("#recommend-contents").css("bottom",addHeightByAnchorAds("bottom")+75+"px"),$("#recommend-contents").css("right","-350px"),$("#recommend-contents").css("display","block"),recommendPostTimer=$("#recommend-contents").animate({right:t+"px"},1e3,"swing",function(){}),recommendPostTimer=setTimeout(function(){$("#recommend-contents").animate({right:"-350px"},1e3,"swing",function(){$("#recommend-contents").css("display","none"),recommendPostTimer=0})},1e4))}}else recommendPostFlag=!0;preRecommendPosition=window.scrollY}}function addHeightByAnchorAds(t){return 0<$(".adsbygoogle[data-anchor-status]").length&&"displayed"==$(".adsbygoogle[data-anchor-status]").attr("data-anchor-status")?"bottom"==t?$(".adsbygoogle[data-anchor-status]").offset().top>window.scrollY?$(".adsbygoogle[data-anchor-status]").height():0:"top"==t?$(".adsbygoogle[data-anchor-status]").offset().top==window.scrollY?$(".adsbygoogle[data-anchor-status]").height():0:void 0:0}function commonForScroll(){$(".floating-button").css("bottom",addHeightByAnchorAds("bottom")+30+"px"),$("#wrapper").css("padding-bottom",addHeightByAnchorAds("bottom")+"px")}function refreshAds(t){$("#adsense-refresh").val()&&("init"==t?(refreshAds("recommend"),setTimeout(function(){refreshAds("sidebar")},200)):setTimeout(function(){"recommend"==t?0<$("#recommend-ads > ins").children().length&&($("#recommend-ads > ins").children().remove(),$("#recommend-ads > ins").removeAttr("data-adsbygoogle-status"),(adsbygoogle=window.adsbygoogle||[]).push({}),refreshAds("recommend")):"sidebar"==t&&0<$(".sidebar .revenue_unit_wrap .adsbygoogle").length&&($(".sidebar .revenue_unit_wrap .adsbygoogle").children().remove(),$(".sidebar .revenue_unit_wrap .adsbygoogle").removeAttr("data-adsbygoogle-status"),(adsbygoogle=window.adsbygoogle||[]).push({}),refreshAds("sidebar"))},3e4*(2*Math.random()+1)))}$(document).ready(function(){makeToc(),selectMakeFloatingToc(),commentControl(),commentAutoLink(),smoothScroll(),initFoldReply(),updateTagsAttr(),lazyLoading(),moveToTheTitle(),makeBell(),toastAfterLike(),bgmEvents(),toggleCategory(),replaceLink(),refreshAds("init"),common(),$(window).on("scroll resize",function(){scrollProgressBar(),selectAppendToc(),fixedRecommendAds("toc"),stopScrollTimer(),fixedHeader(),detectTop(),stickySidebar(),foldFloatingToc(),recommendPost(),commonForScroll()})});